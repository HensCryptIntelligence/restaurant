<!doctype html>
<html lang="id">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>Bitehive — Transaction UI</title>

  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;600;700;800&display=swap" rel="stylesheet">
  <link rel="stylesheet" href="transaction1.css">
</head>
<body>
  <div class="app">

    <!-- SIDEBAR -->
    <aside class="sidebar" aria-label="Sidebar navigation">
      <div class="sidebar-top">
        <div class="brand">Bitehive</div>

        <nav class="nav" role="navigation" aria-label="Main navigation">
          <button class="nav-item" id="nav-dashboard" aria-label="Dashboard" data-target="dashboard">
            <span class="icon" style="-webkit-mask-image: url('icon/layout-dashboard.png'); mask-image: url('icon/layout-dashboard.png');"></span>
            <span class="label">Dashboard</span>
          </button>

          <button class="nav-item" id="nav-order" aria-label="Order" data-target="order">
            <span class="icon" style="-webkit-mask-image: url('icon/chart-pie.png'); mask-image: url('icon/chart-pie.png');"></span>
            <span class="label">Order</span>
          </button>

          <button class="nav-item" id="nav-reservation" aria-label="Reservation" data-target="reservation">
            <span class="icon" style="-webkit-mask-image: url('icon/calendar-arrow-up.png'); mask-image: url('icon/calendar-arrow-up.png');"></span>
            <span class="label">Reservation</span>
          </button>

          <button class="nav-item active" id="nav-transaction" aria-label="Transaction" data-target="transaction">
            <span class="icon" style="-webkit-mask-image: url('icon/arrow-left-right.png'); mask-image: url('icon/arrow-left-right.png');"></span>
            <span class="label">Transaction</span>
          </button>
        </nav>
      </div>

      <div class="sidebar-bottom">
        <button class="logout" aria-label="Logout"
        style="-webkit-mask-image: url('icon/log-out.png'); mask-image: url('icon/log-out.png');"></button>
      </div>
    </aside>

    <!-- MAIN -->
    <main class="main">
      <div class="main-inner">
        <header class="topbar">
          <div class="title-wrap">
            <div class="chev">›</div>
            <h1 class="title">Transaction</h1>
          </div>

          <div class="user">
            <div class="user-text">CUSTOMER</div>
            <img class="avatar" src="https://i.pravatar.cc/40" alt="user avatar">
          </div>
        </header>

        <section class="controls">
          <div class="tabs" role="tablist" aria-label="Filter transactions">
            <button class="tab active" data-filter="all">All</button>
            <button class="tab" data-filter="completed">Completed</button>
            <button class="tab" data-filter="cancelled">Cancelled</button>
          </div>

          <div class="search-wrapper">
            <div class="search-container">
              <input id="search" placeholder="Search a name, order or etc" aria-label="Search"/>
              <div id="search-history" class="search-history"></div>
            </div>
            <button class="search-btn" aria-label="search"></button>
          </div>
        </section>

        <section id="cards" class="cards-grid">
          
          <!-- CARD SAMPLE -->
          <article class="card" data-status="completed">
            <div class="card-header">
              <div class="badge">01</div>
              <div class="meta">
                <div class="name">Watson Joyce</div>
                <div class="order">Order #002</div>
              </div>
              <div class="status">✓ Completed</div>
            </div>

            <div class="card-body">
              <div class="row info">
                <div>Wednesday, 28, 2024</div>
                <div>4 : 48 PM</div>
              </div>

              <hr />

              <div class="items">
                <div class="items-header"><div>Serial Items</div><div>Qty</div></div>
                <div class="item"><div class="left"># 01 Scrambled eggs with toast</div><div class="right">01</div></div>
                <div class="item"><div class="left"># 02 Smoked Salmon Bagel</div><div class="right">01</div></div>
                <div class="item"><div class="left"># 03 Belgian Waffles</div><div class="right">02</div></div>
              </div>

              <hr />

              <div class="total"><div>Total Price</div><div>IDR 3.300.000,00</div></div>

              <button class="viewall">View All</button>
            </div>
          </article>

            <!-- CARD SAMPLE -->
          <article class="card" data-status="completed">
            <div class="card-header">
              <div class="badge">01</div>
              <div class="meta">
                <div class="name">Watson Joyce</div>
                <div class="order">Order #002</div>
              </div>
              <div class="status">✓ Completed</div>
            </div>

            <div class="card-body">
              <div class="row info">
                <div>Wednesday, 28, 2024</div>
                <div>4 : 48 PM</div>
              </div>

              <hr />

              <div class="items">
                <div class="items-header"><div>Serial Items</div><div>Qty</div></div>
                <div class="item"><div class="left"># 01 Scrambled eggs with toast</div><div class="right">01</div></div>
                <div class="item"><div class="left"># 02 Smoked Salmon Bagel</div><div class="right">01</div></div>
                <div class="item"><div class="left"># 03 Belgian Waffles</div><div class="right">02</div></div>
              </div>

              <hr />

              <div class="total"><div>Total Price</div><div>IDR 3.300.000,00</div></div>

              <button class="viewall">View All</button>
            </div>
          </article>


            <!-- CARD SAMPLE -->
          <article class="card" data-status="completed">
            <div class="card-header">
              <div class="badge">01</div>
              <div class="meta">
                <div class="name">Watson Joyce</div>
                <div class="order">Order #002</div>
              </div>
              <div class="status">✓ Completed</div>
            </div>

            <div class="card-body">
              <div class="row info">
                <div>Wednesday, 28, 2024</div>
                <div>4 : 48 PM</div>
              </div>

              <hr />

              <div class="items">
                <div class="items-header"><div>Serial Items</div><div>Qty</div></div>
                <div class="item"><div class="left"># 01 Scrambled eggs with toast</div><div class="right">01</div></div>
                <div class="item"><div class="left"># 02 Smoked Salmon Bagel</div><div class="right">01</div></div>
                <div class="item"><div class="left"># 03 Belgian Waffles</div><div class="right">02</div></div>
              </div>

              <hr />

              <div class="total"><div>Total Price</div><div>IDR 3.300.000,00</div></div>

              <button class="viewall">View All</button>
            </div>
          </article>

        </section>
      </div>
    </main>
  </div>

  <script>
    /* NAV ACTIVE */
    (function () {
      const navItems = document.querySelectorAll('.nav-item');
      navItems.forEach(item => {
        item.addEventListener('click', () => {
          navItems.forEach(i => i.classList.remove('active'));
          item.classList.add('active');

          navItems.forEach(i => i.setAttribute('aria-current', i.classList.contains('active') ? 'page' : 'false'));
          const label = item.querySelector('.label')?.textContent || '';
          document.querySelector('.title').textContent = label;
        });
      });
    })();

    /* FILTER & SEARCH */
    (function () {
      const tabs = document.querySelectorAll('.tab');
      const cards = document.querySelectorAll('.card');
      const search = document.getElementById('search');

      tabs.forEach(t => t.addEventListener('click', () => {
        tabs.forEach(x => x.classList.remove('active'));
        t.classList.add('active');
        filterCards(t.dataset.filter, search.value);
      }));

      search.addEventListener('input', (e) => {
        const activeTab = document.querySelector('.tab.active').dataset.filter;
        filterCards(activeTab, e.target.value);
      });

      function filterCards(filter, q) {
        q = q.toLowerCase().trim();
        cards.forEach(card => {
          const status = card.dataset.status;
          const name = card.querySelector('.name').textContent.toLowerCase();
          const order = card.querySelector('.order').textContent.toLowerCase();
          const matchesFilter = (filter === 'all') || (status === filter);
          const matchesQuery = !q || name.includes(q) || order.includes(q) || card.textContent.toLowerCase().includes(q);
          card.style.display = (matchesFilter && matchesQuery) ? '' : 'none';
        });
      }

      filterCards('all', '');
    })();


    /* SEARCH HISTORY */
    const searchInput = document.getElementById("search");
    const historyBox = document.getElementById("search-history");

    function loadHistory() {
      return JSON.parse(localStorage.getItem("searchHistory") || "[]");
    }

    function saveHistory(keyword) {
      let history = loadHistory();

      history = history.filter(h => h !== keyword);
      history.unshift(keyword);

      if (history.length > 5) history.pop();
      localStorage.setItem("searchHistory", JSON.stringify(history));
    }

    function showHistory() {
      const history = loadHistory();

      if (history.length === 0) {
        historyBox.style.display = "none";
        return;
      }

      historyBox.innerHTML = history
        .map(item => `<div class="search-history-item">${item}</div>`)
        .join("");

      historyBox.style.display = "block";

      document.querySelectorAll(".search-history-item").forEach(item => {
        item.addEventListener("click", () => {
          searchInput.value = item.textContent;
          historyBox.style.display = "none";
          searchInput.dispatchEvent(new Event("input"));
        });
      });
    }

    searchInput.addEventListener("focus", showHistory);

    document.addEventListener("click", (e) => {
      if (!e.target.closest(".search-container")) {
        historyBox.style.display = "none";
      }
    });

    searchInput.addEventListener("keydown", (e) => {
      if (e.key === "Enter") {
        const keyword = searchInput.value.trim();
        if (keyword) saveHistory(keyword);
        historyBox.style.display = "none";
      }
    });
  </script>

</body>
</html>
